<!DOCTYPE html>
<html>
<head>
    <title>Login Page</title>
    <script>
        var loginData;
        function fetchData(){
            fetch('./login.json')
                .then(response => {
                    if(!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Data fetched:', data);
                    loginData = data;
                    enterData();
                })
        }
        function enterData(){
            if(loginData.Volunteers && loginData.Volunteers.length > 0){
                for(var i = 0;i < loginData.Volunteers.length;i++)
                console.log(i+":", loginData.Volunteers[i]);
            } else {
                console.log('No volunteers found.');
            }
        }
        fetchData();
       function checkPassword(){
        var enterEmail = document.getElementById("email_address").value;
        var enterPass = document.getElementById("password").value;
        
        //grab email and password from json file
        fetch('./login.json')
            .then(response => response.json())
            .then(data =>{
                var JSONemail = findUserbyEmail(enterEmail);
                console.log("Email:", JSONemail);
                var JSONpassword = findPasswordByEmail(JSONemail);
                console.log(JSONpassword);
                //data.find(u=>u.email_address === email_address && u.password === password);
                if(JSONpassword === enterPass) {
                    document.getElementById('LoginValue').innerText = 'Success';
                } else {

                    document.getElementById('LoginValue').innerText = 'Invalid email or password.';
                }
            })
            .catch(error => console.error('Error:', error));
       } 
       function findUserbyEmail(email_address){
            console.log(email_address);
            for(var i = 0; i < loginData.Volunteers.length;i++){
                var volunteers = loginData.Volunteers[i];
                if(volunteers.email_address === email_address){
                    return volunteers.email_address;
                }
            }
            return null;
       }
       function indexOfEmail(email_address){
            return loginData.Volunteers.findIndex(function(volunteer){
                return volunteer.email_address == email_address;
            });
       }
       function findPasswordByEmail(email_address){
            var index = indexOfEmail(email_address);
            var filePassword = loginData.Volunteers[index].password;
            return filePassword;
       }
    
    </script>
</head>
<body>
    <h2>Login</h2>
    <form>
        <div>
            <label for="email_address">Email Address</label>
            <input type="text" id="email_address" name="email_address" required>
        </div>
        <div>
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required>
        </div>
        <div>
            <input type="button" id="Login" value = "Login" onclick="checkPassword()">
        </div>
    </form>
    <h2>Login Data</h2>
    <p id="LoginValue"></p>
</body>
</html>
