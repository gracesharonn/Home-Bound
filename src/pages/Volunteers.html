<!-- volunteers/ login page -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Bound</title>
    <link rel="stylesheet" href="../styles/default.css">
    <link href="https://fonts.googleapis.com/css?family=Gochi+Hand:regular" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=BenchNine:300,regular,700" rel="stylesheet" />
    <script>
       function checkPassword(){
        var loginData;
        fetchData();
        var enterEmail = document.getElementById("email_address").value;
        var enterPass = document.getElementById("password").value;
        
        //grab email and password from json file
        fetch('../JSON/login.json')
            .then(response => response.json())
            .then(data =>{
                var JSONemail = findUserbyEmail(enterEmail);
                console.log("Email:", JSONemail);
                var JSONpassword = findPasswordByEmail(JSONemail);
                console.log(JSONpassword);
                //data.find(u=>u.email_address === email_address && u.password === password);
                if(JSONpassword === enterPass) {
                    document.getElementById('LoginValue').innerText = 'Success';
                } else {
    
                    document.getElementById('LoginValue').innerText = 'Invalid email or password.';
                }
            })
            .catch(error => console.error('Error:', error));
       } 
       function findUserbyEmail(email_address){
            console.log(email_address);
            for(var i = 0; i < loginData.Volunteers.length;i++){
                var volunteers = loginData.Volunteers[i];
                if(volunteers.email_address === email_address){
                    return volunteers.email_address;
                }
            }
            return null;
       }
       function indexOfEmail(email_address){
            return loginData.Volunteers.findIndex(function(volunteer){
                return volunteer.email_address == email_address;
            });
       }
       function findPasswordByEmail(email_address){
            var index = indexOfEmail(email_address);
            var filePassword = loginData.Volunteers[index].password;
            return filePassword;
       }
       function enterData(){
            if(loginData.Volunteers && loginData.Volunteers.length > 0){
                for(var i = 0;i < loginData.Volunteers.length;i++)
                console.log(i+":", loginData.Volunteers[i]);
            } else {
                console.log('No volunteers found.');
            }
        }
       function fetchData(){
            fetch('../JSON/login.json')
                .then(response => {
                    if(!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Data fetched:', data);
                    loginData = data;
                    enterData();
                })
        }
    </script>
</head>
<body>
    <a id="top"></a>
    <div class="NavigationBar">
        <ul>
            <li><a href="../pages/index.html">Home</a></li>
            <li><a href="../pages/AboutUs.html">About Us</a></li>
            <li><a href="#" id="ServicesButton">Services</a></li> 
        </ul>
    </div>

    <div class="ServiceMenu">
        <div id="x-button" class="x-button">X</div>
        <nav>
            <ul>
                <li><a>Food</a></li>
                <li><a href="../pages/services/Shelters.html">Shelter</a></li>
                <li><a>Medical</a></li>
                <li><a>Daycare</a></li>
                <li><a>Bikehub</a></li>
                <li><a>Employment</a></li>
                <li><a>See All</a></li>
            </ul>
        </nav>
    </div>

    <div class="LoginRegisterBG">
        <img  src="../images/LoginRegisterBG.svg">
        <img id="bike" src="../images/bike.svg">
        <img id="houses" src="../images/houses.svg">
    </div>

    <div class="LoginContainer">
        <form id="LoginBox">
            <h1>Login</h1>
            <input type="text" id="email_address" name="email_address" placeholder="       Email" required>
            <input type="password" id="password" name="password" placeholder="       Password"required>

            <input type="button" id="Login" value = "Continue" onclick="checkPassword()">
            <p id="AskUser">New User?</p>
            <p id="CreateAcc"><a href="./SignUp.html">Create an Account</a></p>
        </form>
    </div>

    <!-- <h1>Login Data</h1>
   <p id="LoginValue"></p> idk what's this for thats why i commented it-->
   <script src="../styles/script.js"></script>
</body>
</html>